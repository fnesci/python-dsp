import fir_filter
import math
import _nco

class HilbertTransformer:
    def __init__(self):
        self.nco = _nco.Nco(-0.5 * math.pi)
        h = [0 if abs(x) < 1e-10 else x for x in HilbertTransformer.half_band_coeff]
        self.fir = fir_filter.FirFilter(h)
        self.emit = False

    half_band_coeff = [
        -0.000000000000000001,
        -0.000087126473821859,
        0.000000000000000000,
        0.000183110485521546,
        -0.000000000000000001,
        -0.000328766400046780,
        0.000000000000000002,
        0.000538554331510601,
        -0.000000000000000001,
        -0.000829134265768834,
        -0.000000000000000001,
        0.001219530962439536,
        -0.000000000000000003,
        -0.001731405052656541,
        0.000000000000000011,
        0.002389518005857465,
        -0.000000000000000005,
        -0.003222528312730664,
        -0.000000000000000007,
        0.004264337937972161,
        -0.000000000000000007,
        -0.005556351011886448,
        0.000000000000000031,
        0.007151270238010430,
        -0.000000000000000010,
        -0.009119567307285848,
        0.000000000000000011,
        0.011560814301051089,
        -0.000000000000000013,
        -0.014624374832294569,
        0.000000000000000014,
        0.018549468250363944,
        -0.000000000000000015,
        -0.023749162734636720,
        0.000000000000000017,
        0.031006487533824810,
        -0.000000000000000018,
        -0.042006702726104281,
        0.000000000000000018,
        0.061146683178140739,
        -0.000000000000000019,
        -0.104580830796204199,
        0.000000000000000019,
        0.317813705090969401,
        0.500024939195549911,
        0.317813705090969401,
        0.000000000000000019,
        -0.104580830796204199,
        -0.000000000000000019,
        0.061146683178140794,
        0.000000000000000018,
        -0.042006702726104281,
        -0.000000000000000018,
        0.031006487533824810,
        0.000000000000000017,
        -0.023749162734636720,
        -0.000000000000000015,
        0.018549468250363944,
        0.000000000000000014,
        -0.014624374832294569,
        -0.000000000000000013,
        0.011560814301051089,
        0.000000000000000011,
        -0.009119567307285848,
        -0.000000000000000010,
        0.007151270238010430,
        0.000000000000000031,
        -0.005556351011886448,
        -0.000000000000000007,
        0.004264337937972161,
        -0.000000000000000007,
        -0.003222528312730667,
        -0.000000000000000005,
        0.002389518005857465,
        0.000000000000000011,
        -0.001731405052656541,
        -0.000000000000000003,
        0.001219530962439536,
        -0.000000000000000001,
        -0.000829134265768834,
        -0.000000000000000001,
        0.000538554331510601,
        0.000000000000000002,
        -0.000328766400046780,
        -0.000000000000000001,
        0.000183110485521546,
        0.000000000000000000,
        -0.000087126473821859,
        -0.000000000000000001,
    ]
    